env:
  global:
  - REPO_NAME=NJUPole/aliyun-odps-python-sdk
  - REPO_DIR=.
  - BUILD_COMMIT=v0.7.6
  - PLAT=x86_64
  - BUILD_DEP="cython"
  - UNICODE_WIDTH=32
  - secure: gM0t6qJK7q7OjHTPpaHQQkKVQinMWxdOSOtjhnS9d15QvqqYxDSTJAa0Eu0T8yM9z/MkokD62JPiffVXsfS7YKTk7IAivoJHku5V/JLKYcuAj48YiAFdPFhDweZ2EXOsvc6Zrorzx64/MX6XyjOwL8IGo3Kz4fNPOEDCjzS/+/2pMP9w515Jnk6bW1TOFt7DOMa6M489K+/fJwZBaFYvQmFttQws1MiKTGJ1Yaershw7ZCW3+slZ1Rczj9+X5jgmvRnjIunb5dflPDlxvaWP4esUhezMFCBF3LSW4fXBlpSkMaWp6URv6vNQk0QQRYp2VEzbEGGYEDAt8AlZ8F7xQbiqmARBJrcf9vSVl80VaxNxoz28+3fOxvP/WGDmAYXty6ONgvNRdVp1Ecc4DozL8lTIIZL8BDzKU0NO4VepwgaQZ6oyhhLbrQFIJdT7Jt7V51M6n3j9Kc9Hzvk8n5cZgboKy3EnPE15mvtrs6efOFF4c3xZ2ICUlM88BrYMmFeZ/I7IhDMxiKxVH1CGQ+Jv0ifmdy+MPA5eFxLnY/2HmUm2XLhW2GzysV3ekWZd1BD5oibHU4hl2IlSRgHtuSomNrCJlZMV9M12SsVsliRjUFIMnrzdxgp0DPKOsLp+Wi8wrWpnp+piNOPk+RChJsSggg9QBaKjnfuLybTSrtit2f0=
language: python
python: 3.5
sudo: required
dist: trusty
services: docker
matrix:
  exclude:
  - python: 3.5
  include:
  - os: linux
    env: MB_PYTHON_VERSION=2.7
  - os: linux
    env:
    - MB_PYTHON_VERSION=2.7
    - UNICODE_WIDTH=16
  - os: linux
    env:
    - MB_PYTHON_VERSION=2.7
    - PLAT=i686
  - os: linux
    env:
    - MB_PYTHON_VERSION=2.7
    - PLAT=i686
    - UNICODE_WIDTH=16
  - os: linux
    env:
    - MB_PYTHON_VERSION=3.5
  - os: linux
    env:
    - MB_PYTHON_VERSION=3.5
    - PLAT=i686
  - os: linux
    env:
    - MB_PYTHON_VERSION=3.6
  - os: linux
    env:
    - MB_PYTHON_VERSION=3.6
    - PLAT=i686
  - os: osx
    language: generic
    env:
    - MB_PYTHON_VERSION=2.7
  - os: osx
    language: generic
    env:
    - MB_PYTHON_VERSION=3.5
  - os: osx
    language: generic
    env:
    - MB_PYTHON_VERSION=3.6
before_install:
  - ls
  - BUILD_DEPENDS="$BUILD_DEP"
  - source multibuild/common_utils.sh
  - source multibuild/travis_steps.sh
  - before_install
install:
  - build_wheel $REPO_DIR $PLAT
script:
  - echo "$TRAVIS_TAG"
  - ls
deploy:
  provider: pypi
  distributions: sdist bdist bdist_wheel
  server: https://testpypi.python.org/pypi
  user: pyodps
  password:
    secure: gM0t6qJK7q7OjHTPpaHQQkKVQinMWxdOSOtjhnS9d15QvqqYxDSTJAa0Eu0T8yM9z/MkokD62JPiffVXsfS7YKTk7IAivoJHku5V/JLKYcuAj48YiAFdPFhDweZ2EXOsvc6Zrorzx64/MX6XyjOwL8IGo3Kz4fNPOEDCjzS/+/2pMP9w515Jnk6bW1TOFt7DOMa6M489K+/fJwZBaFYvQmFttQws1MiKTGJ1Yaershw7ZCW3+slZ1Rczj9+X5jgmvRnjIunb5dflPDlxvaWP4esUhezMFCBF3LSW4fXBlpSkMaWp6URv6vNQk0QQRYp2VEzbEGGYEDAt8AlZ8F7xQbiqmARBJrcf9vSVl80VaxNxoz28+3fOxvP/WGDmAYXty6ONgvNRdVp1Ecc4DozL8lTIIZL8BDzKU0NO4VepwgaQZ6oyhhLbrQFIJdT7Jt7V51M6n3j9Kc9Hzvk8n5cZgboKy3EnPE15mvtrs6efOFF4c3xZ2ICUlM88BrYMmFeZ/I7IhDMxiKxVH1CGQ+Jv0ifmdy+MPA5eFxLnY/2HmUm2XLhW2GzysV3ekWZd1BD5oibHU4hl2IlSRgHtuSomNrCJlZMV9M12SsVsliRjUFIMnrzdxgp0DPKOsLp+Wi8wrWpnp+piNOPk+RChJsSggg9QBaKjnfuLybTSrtit2f0=
  skip_cleanup: true
  on:
    branch: testPyPI
